<h2 mat-dialog-title>
  {{ isEdit ? 'Edit Product' : 'Create Product' }}
</h2>

<div mat-dialog-content>

  <form [formGroup]="form" class="form">

    <!-- Name -->
    <mat-form-field appearance="outline">
      <mat-label>Name</mat-label>

      <input matInput formControlName="name" required />
    </mat-form-field>
    <app-form-errors [control]="form.get('name')" label="Name" />


    <!-- SKU -->
    <mat-form-field appearance="outline">
      <mat-label>SKU</mat-label>

      <input matInput formControlName="sku" required />
    </mat-form-field>
    <app-form-errors [control]="form.get('sku')" label="SKU" />


    <!-- Barcode -->
    <mat-form-field appearance="outline">
      <mat-label>Barcode (optional)</mat-label>

      <input matInput formControlName="barcode" />

    </mat-form-field>


    <!-- Min Stock -->
    <mat-form-field appearance="outline">
      <mat-label>Min Stock Level</mat-label>

      <input
        matInput
        type="number"
        min="0"
        formControlName="minStockLevel"
      />
    </mat-form-field>
    <app-form-errors [control]="form.get('minStockLevel')" label="Min stock level" />


    <!-- Error message -->
    <div class="error" *ngIf="error()">
      {{ error() }}
    </div>

    @if (loading() && isEdit) {
    <div class="loading-row">
      <app-loading message="Loading product..." />
    </div>
    }

  </form>

</div>

<div mat-dialog-actions align="end">

  <button
    mat-button
    (click)="close()"
    [disabled]="loading()"
  >
    Cancel
  </button>

  <button
    mat-flat-button
    color="primary"
    (click)="save()"
    [disabled]="loading() || form.invalid"
  >
    {{ loading() ? 'Saving...' : 'Save' }}
  </button>

</div>
